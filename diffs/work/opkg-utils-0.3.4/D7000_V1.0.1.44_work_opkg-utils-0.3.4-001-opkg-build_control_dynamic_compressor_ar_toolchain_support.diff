diff -urN work/opkg-utils-0.3.4/opkg-build work/opkg-utils-0.3.4/opkg-build
--- work/opkg-utils-0.3.4/opkg-build	2016-10-07 18:29:53.000000000 +0200
+++ work/opkg-utils-0.3.4/opkg-build	2017-03-31 23:36:03.545692069 +0200
@@ -11,6 +11,21 @@
 # 2003-04-25 rea@sr.unh.edu
 #   Updated to work on Familiar Pre0.7rc1, with busybox tar.
 #   Note it Requires: binutils-ar (since the busybox ar can't create)
+#
+# Revised & adapted:
+#
+# ancistrus
+#
+# Netgear's Nighthawk Router Experience Distributed Project
+#
+# D7000
+#
+# https://github.com/negan07/ancistrus
+#
+# License: GPLv2
+#
+#
+
 set -e
 
 version=1.0
@@ -208,15 +223,22 @@
     esac
 }
 
+toolchain_test() {
+	if [ ! -f $1 ] || [ ! -x $1 ]; then
+	echo "*** Error: unable to find ar path: $1" >&2
+	exit 1
+	fi
+}
+
 : <<=cut
 =head1 SYNOPSIS
 
-B<opkg-build> [B<-c>] [B<-C>] [B<-Z> I<compressor>] [B<-O>] [B<-o> I<owner>] [B<-g> I<group>] I<pkg_directory> [I<destination_directory>]
+B<opkg-build> [B<-c>] [B<-C>] [B<-Z> I<compressor>] [B<-T> I<toolchain_prefix_path>] [B<-O>] [B<-o> I<owner>] [B<-g> I<group>] I<pkg_directory> [I<destination_directory>]
 
 =cut
 
-usage="Usage: $0 [-c] [-C] [-Z compressor] [-O] [-o owner] [-g group] <pkg_directory> [<destination_directory>]"
-while getopts "cCg:ho:vOZ:" opt; do
+usage="Usage: $0 [-c] [-C] [-Z compressor] [-T toolchain_prefix_path] [-O] [-o owner] [-g group] <pkg_directory> [<destination_directory>]"
+while getopts "cCg:ho:vOZ:T:" opt; do
     case $opt in
 	o ) owner=$OPTARG
 	    ogargs="--owner=$owner"
@@ -232,6 +254,8 @@
 	    ;;
 	Z ) compressor=$OPTARG
 	    ;;
+	T ) [ "$outer" = "ar" ] && outer=${OPTARG}ar && toolchain_test $outer
+	    ;;
 	v ) echo $version
 	    exit 0
 	    ;;
@@ -293,7 +317,8 @@
 
 echo $CONTROL > $tmp_dir/tarX
 ( cd $pkg_dir && tar $ogargs -X $tmp_dir/tarX -c --$compressor $tarformat -f $tmp_dir/data.tar.$cext . )
-( cd $pkg_dir/$CONTROL && tar $ogargs -cz $tarformat -f $tmp_dir/control.tar.gz . )
+( cd $pkg_dir/$CONTROL && tar $ogargs -c --$compressor $tarformat -f $tmp_dir/control.tar.$cext . )
+#( cd $pkg_dir/$CONTROL && tar $ogargs -cz $tarformat -f $tmp_dir/control.tar.gz . )
 rm $tmp_dir/tarX
 
 echo "2.0" > $tmp_dir/debian-binary
@@ -305,13 +330,16 @@
 fi
 
 rm -f $pkg_file
-if [ "$outer" = "ar" ] ; then
-  ( cd $tmp_dir && ar -crf $pkg_file ./debian-binary ./control.tar.gz ./data.tar.$cext )
+if [ "$outer" = "tar" ] ; then
+  ( cd $tmp_dir && $outer -cz $tarformat -f $pkg_file ./debian-binary ./control.tar.$cext ./data.tar.$cext )
+#  ( cd $tmp_dir && tar -cz $tarformat -f $pkg_file ./debian-binary ./control.tar.gz ./data.tar.$cext )
 else
-  ( cd $tmp_dir && tar -cz $tarformat -f $pkg_file ./debian-binary ./control.tar.gz ./data.tar.$cext )
+  ( cd $tmp_dir && $outer -crf $pkg_file ./debian-binary ./control.tar.$cext ./data.tar.$cext )
+#  ( cd $tmp_dir && ar -crf $pkg_file ./debian-binary ./control.tar.gz ./data.tar.$cext )
 fi
 
-rm $tmp_dir/debian-binary $tmp_dir/data.tar.$cext $tmp_dir/control.tar.gz
+rm $tmp_dir/debian-binary $tmp_dir/data.tar.$cext $tmp_dir/control.tar.$cext
+#rm $tmp_dir/debian-binary $tmp_dir/data.tar.$cext $tmp_dir/control.tar.gz
 rmdir $tmp_dir
 
 echo "Packaged contents of $pkg_dir into $pkg_file"
@@ -346,6 +374,10 @@
 
 Specify which compression type to use when building a package. Allowed values are B<gzip>, B<bzip2> and B<xz> (default is B<gzip>).
 
+=item B<-T> I<toolchain_prefix_path>
+
+Specify a path toolchain prefix for ar, relative or absolute. Typical values are B</opt/toolchain/usr/bin/arm-linux->, B<mips-linux-uclibc-> and so on (default is B<no toolchain prefix>). Note that this option is always overrided by B<-c> one (generate a binary in tar format).
+
 =item B<-O>
 
 Use B<.opk> extension. By default, B<.ipk> is used.
